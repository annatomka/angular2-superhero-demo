"format register";System.register("angular2/src/router/instruction",["angular2/src/core/facade/collection","angular2/src/core/facade/exceptions","angular2/src/core/facade/lang"],!0,function(require,e,t){function r(e){return n(e)+i(e)}function n(e){return e.component.urlPath+s(e)+o(e.child)}function i(e){return e.component.urlParams.length>0?"?"+e.component.urlParams.join("&"):""}function o(e){if(f.isBlank(e))return"";var t=e.component.urlParams.length>0?";"+e.component.urlParams.join(";"):"";return"/"+e.component.urlPath+t+s(e)+o(e.child)}function s(e){var t=[];return l.StringMapWrapper.forEach(e.auxInstruction,function(e,r){t.push(o(e))}),t.length>0?"("+t.join("//")+")":""}var a=System.global,c=a.define;a.define=void 0;var u=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},l=require("angular2/src/core/facade/collection"),p=require("angular2/src/core/facade/exceptions"),f=require("angular2/src/core/facade/lang"),d=function(){function e(e){this.params=e}return e.prototype.get=function(e){return f.normalizeBlank(l.StringMapWrapper.get(this.params,e))},e}();e.RouteParams=d;var h=function(){function e(e){void 0===e&&(e=f.CONST_EXPR({})),this.data=e}return e.prototype.get=function(e){return f.normalizeBlank(l.StringMapWrapper.get(this.data,e))},e}();e.RouteData=h;var g=new h,v=function(){function e(e,t,r){this.component=e,this.child=t,this.auxInstruction=r}return e.prototype.replaceChild=function(t){return new e(this.component,t,this.auxInstruction)},e}();e.Instruction=v;var m=function(){function e(e,t,r){this.component=e,this.child=t,this.auxUrls=r}return e}();e.PrimaryInstruction=m,e.stringifyInstruction=r,e.stringifyInstructionPath=n,e.stringifyInstructionQuery=i;var y=function(){function e(){this.reuse=!1}return Object.defineProperty(e.prototype,"componentType",{get:function(){return p.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specificity",{get:function(){return p.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"terminal",{get:function(){return p.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"routeData",{get:function(){return p.unimplemented()},enumerable:!0,configurable:!0}),e}();e.ComponentInstruction=y;var _=function(e){function t(t,r,n,i){void 0===i&&(i=null),e.call(this),this._recognizer=n,this.urlPath=t,this.urlParams=r,this.params=i,f.isPresent(this._recognizer.handler.data)?this._routeData=new h(this._recognizer.handler.data):this._routeData=g}return u(t,e),Object.defineProperty(t.prototype,"componentType",{get:function(){return this._recognizer.handler.componentType},enumerable:!0,configurable:!0}),t.prototype.resolveComponentType=function(){return this._recognizer.handler.resolveComponentType()},Object.defineProperty(t.prototype,"specificity",{get:function(){return this._recognizer.specificity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"terminal",{get:function(){return this._recognizer.terminal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"routeData",{get:function(){return this._routeData},enumerable:!0,configurable:!0}),t}(y);return e.ComponentInstruction_=_,a.define=c,t.exports}),System.register("angular2/src/router/lifecycle_annotations_impl",["angular2/src/core/facade/lang"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=require("angular2/src/core/facade/lang"),a=function(){function e(e){this.name=e}return e=i([s.CONST(),o("design:paramtypes",[String])],e)}();e.RouteLifecycleHook=a;var c=function(){function e(e){this.fn=e}return e=i([s.CONST(),o("design:paramtypes",[Function])],e)}();return e.CanActivate=c,e.canReuse=s.CONST_EXPR(new a("canReuse")),e.canDeactivate=s.CONST_EXPR(new a("canDeactivate")),e.onActivate=s.CONST_EXPR(new a("onActivate")),e.onReuse=s.CONST_EXPR(new a("onReuse")),e.onDeactivate=s.CONST_EXPR(new a("onDeactivate")),r.define=n,t.exports}),System.register("angular2/src/router/lifecycle_annotations",["angular2/src/core/util/decorators","angular2/src/router/lifecycle_annotations_impl","angular2/src/router/lifecycle_annotations_impl"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/core/util/decorators"),o=require("angular2/src/router/lifecycle_annotations_impl"),s=require("angular2/src/router/lifecycle_annotations_impl");return e.canReuse=s.canReuse,e.canDeactivate=s.canDeactivate,e.onActivate=s.onActivate,e.onReuse=s.onReuse,e.onDeactivate=s.onDeactivate,e.CanActivate=i.makeDecorator(o.CanActivate),r.define=n,t.exports}),System.register("angular2/src/router/location_strategy",[],!0,function(require,e,t){function r(e){return e.length>0&&"?"!=e.substring(0,1)?"?"+e:e}var n=System.global,i=n.define;n.define=void 0;var o=function(){function e(){}return e}();return e.LocationStrategy=o,e.normalizeQueryParams=r,n.define=i,t.exports}),System.register("angular2/src/router/url_parser",["angular2/src/core/facade/collection","angular2/src/core/facade/lang","angular2/src/core/facade/exceptions"],!0,function(require,e,t){function r(e){for(var t=new p(e[e.length-1]),r=e.length-2;r>=0;r-=1)t=new p(e[r],t);return t}function n(e){var t=u.RegExpWrapper.firstMatch(d,e);return u.isPresent(t)?t[0]:""}function i(e){var t=[];return u.isPresent(e)&&c.StringMapWrapper.forEach(e,function(e,r){t.push(1==e?r:r+"="+e)}),t}var o=System.global,s=o.define;o.define=void 0;var a=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},c=require("angular2/src/core/facade/collection"),u=require("angular2/src/core/facade/lang"),l=require("angular2/src/core/facade/exceptions"),p=function(){function e(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=u.CONST_EXPR([])),void 0===n&&(n=null),this.path=e,this.child=t,this.auxiliary=r,this.params=n}return e.prototype.toString=function(){return this.path+this._matrixParamsToString()+this._auxToString()+this._childString()},e.prototype.segmentToString=function(){return this.path+this._matrixParamsToString()},e.prototype._auxToString=function(){return this.auxiliary.length>0?"("+this.auxiliary.map(function(e){return e.toString()}).join("//")+")":""},e.prototype._matrixParamsToString=function(){return u.isBlank(this.params)?"":";"+i(this.params).join(";")},e.prototype._childString=function(){return u.isPresent(this.child)?"/"+this.child.toString():""},e}();e.Url=p;var f=function(e){function t(t,r,n,i){void 0===r&&(r=null),void 0===n&&(n=u.CONST_EXPR([])),void 0===i&&(i=null),e.call(this,t,r,n,i)}return a(t,e),t.prototype.toString=function(){return this.path+this._auxToString()+this._childString()+this._queryParamsToString()},t.prototype.segmentToString=function(){return this.path+this._queryParamsToString()},t.prototype._queryParamsToString=function(){return u.isBlank(this.params)?"":"?"+i(this.params).join("&")},t}(p);e.RootUrl=f,e.pathSegmentsToUrl=r;var d=u.RegExpWrapper.create("^[^\\/\\(\\)\\?;=&#]+"),h=function(){function e(){}return e.prototype.peekStartsWith=function(e){return u.StringWrapper.startsWith(this._remaining,e)},e.prototype.capture=function(e){if(!u.StringWrapper.startsWith(this._remaining,e))throw new l.BaseException('Expected "'+e+'".');this._remaining=this._remaining.substring(e.length)},e.prototype.parse=function(e){return this._remaining=e,""==e||"/"==e?new p(""):this.parseRoot()},e.prototype.parseRoot=function(){this.peekStartsWith("/")&&this.capture("/");var e=n(this._remaining);this.capture(e);var t=[];this.peekStartsWith("(")&&(t=this.parseAuxiliaryRoutes()),this.peekStartsWith(";")&&this.parseMatrixParams();var r=null;this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),r=this.parseSegment());var i=null;return this.peekStartsWith("?")&&(i=this.parseQueryParams()),new f(e,r,t,i)},e.prototype.parseSegment=function(){if(0==this._remaining.length)return null;this.peekStartsWith("/")&&this.capture("/");var e=n(this._remaining);this.capture(e);var t=null;this.peekStartsWith(";")&&(t=this.parseMatrixParams());var r=[];this.peekStartsWith("(")&&(r=this.parseAuxiliaryRoutes());var i=null;return this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),i=this.parseSegment()),new p(e,i,r,t)},e.prototype.parseQueryParams=function(){var e={};for(this.capture("?"),this.parseParam(e);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseParam(e);return e},e.prototype.parseMatrixParams=function(){for(var e={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(e);return e},e.prototype.parseParam=function(e){var t=n(this._remaining);if(!u.isBlank(t)){this.capture(t);var r=!0;if(this.peekStartsWith("=")){this.capture("=");var i=n(this._remaining);u.isPresent(i)&&(r=i,this.capture(r))}e[t]=r}},e.prototype.parseAuxiliaryRoutes=function(){var e=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)e.push(this.parseSegment()),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),e},e}();return e.UrlParser=h,e.parser=new h,e.serializeParams=i,o.define=s,t.exports}),System.register("angular2/src/router/route_config_impl",["angular2/src/core/facade/lang"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=require("angular2/src/core/facade/lang"),a=function(){function e(e){this.configs=e}return e=i([s.CONST(),o("design:paramtypes",[Array])],e)}();e.RouteConfig=a;var c=function(){function e(e){var t=e.path,r=e.component,n=e.as,i=e.data;this.path=t,this.component=r,this.as=n,this.loader=null,this.redirectTo=null,this.data=i}return e=i([s.CONST(),o("design:paramtypes",[Object])],e)}();e.Route=c;var u=function(){function e(e){var t=e.path,r=e.component,n=e.as;this.data=null,this.loader=null,this.redirectTo=null,this.path=t,this.component=r,this.as=n}return e=i([s.CONST(),o("design:paramtypes",[Object])],e)}();e.AuxRoute=u;var l=function(){function e(e){var t=e.path,r=e.loader,n=e.as,i=e.data;this.path=t,this.loader=r,this.as=n,this.data=i}return e=i([s.CONST(),o("design:paramtypes",[Object])],e)}();e.AsyncRoute=l;var p=function(){function e(e){var t=e.path,r=e.redirectTo;this.as=null,this.loader=null,this.data=null,this.path=t,this.redirectTo=r}return e=i([s.CONST(),o("design:paramtypes",[Object])],e)}();return e.Redirect=p,r.define=n,t.exports}),System.register("angular2/src/router/async_route_handler",["angular2/src/core/facade/lang"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/core/facade/lang"),o=function(){function e(e,t){this._loader=e,this.data=t,this._resolvedComponent=null}return e.prototype.resolveComponentType=function(){var e=this;return i.isPresent(this._resolvedComponent)?this._resolvedComponent:this._resolvedComponent=this._loader().then(function(t){return e.componentType=t,t})},e}();return e.AsyncRouteHandler=o,r.define=n,t.exports}),System.register("angular2/src/router/sync_route_handler",["angular2/src/core/facade/async"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/core/facade/async"),o=function(){function e(e,t){this.componentType=e,this.data=t,this._resolvedComponent=null,this._resolvedComponent=i.PromiseWrapper.resolve(e)}return e.prototype.resolveComponentType=function(){return this._resolvedComponent},e}();return e.SyncRouteHandler=o,r.define=n,t.exports}),System.register("angular2/src/router/route_config_decorator",["angular2/src/router/route_config_impl","angular2/src/core/util/decorators","angular2/src/router/route_config_impl"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/router/route_config_impl"),o=require("angular2/src/core/util/decorators"),s=require("angular2/src/router/route_config_impl");return e.Route=s.Route,e.Redirect=s.Redirect,e.AuxRoute=s.AuxRoute,e.AsyncRoute=s.AsyncRoute,e.RouteConfig=o.makeDecorator(i.RouteConfig),r.define=n,t.exports}),System.register("angular2/src/router/hash_location_strategy",["angular2/src/core/dom/dom_adapter","angular2/angular2","angular2/src/router/location_strategy"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},s=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/src/core/dom/dom_adapter"),c=require("angular2/angular2"),u=require("angular2/src/router/location_strategy"),l=function(e){function t(){e.call(this),this._location=a.DOM.getLocation(),this._history=a.DOM.getHistory()}return i(t,e),t.prototype.onPopState=function(e){a.DOM.getGlobalEventTarget("window").addEventListener("popstate",e,!1)},t.prototype.getBaseHref=function(){return""},t.prototype.path=function(){var e=this._location.hash;return(e.length>0?e.substring(1):e)+u.normalizeQueryParams(this._location.search)},t.prototype.prepareExternalUrl=function(e){return e.length>0?"#"+e:e},t.prototype.pushState=function(e,t,r,n){var i=r+u.normalizeQueryParams(n);i=0==i.length?this._location.pathname:this.prepareExternalUrl(i),this._history.pushState(e,t,i)},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},t=o([c.Injectable(),s("design:paramtypes",[])],t)}(u.LocationStrategy);return e.HashLocationStrategy=l,r.define=n,t.exports}),System.register("angular2/src/router/path_location_strategy",["angular2/src/core/dom/dom_adapter","angular2/angular2","angular2/src/router/location_strategy"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},s=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/src/core/dom/dom_adapter"),c=require("angular2/angular2"),u=require("angular2/src/router/location_strategy"),l=function(e){function t(){e.call(this),this._location=a.DOM.getLocation(),this._history=a.DOM.getHistory(),this._baseHref=a.DOM.getBaseHref()}return i(t,e),t.prototype.onPopState=function(e){a.DOM.getGlobalEventTarget("window").addEventListener("popstate",e,!1)},t.prototype.getBaseHref=function(){return this._baseHref},t.prototype.prepareExternalUrl=function(e){return this._baseHref+e},t.prototype.path=function(){return this._location.pathname+u.normalizeQueryParams(this._location.search)},t.prototype.pushState=function(e,t,r,n){this._history.pushState(e,t,r+u.normalizeQueryParams(n))},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},t=o([c.Injectable(),s("design:paramtypes",[])],t)}(u.LocationStrategy);return e.PathLocationStrategy=l,r.define=n,t.exports}),System.register("angular2/src/router/route_definition",[],!0,function(require,e,t){var r=System.global,n=r.define;return r.define=void 0,r.define=n,t.exports}),System.register("angular2/src/router/location",["angular2/src/router/location_strategy","angular2/src/core/facade/lang","angular2/src/core/facade/async","angular2/src/core/facade/lang","angular2/src/core/facade/exceptions","angular2/angular2"],!0,function(require,e,t){function r(e,t){return e.length>0&&t.startsWith(e)?t.substring(e.length):t}function n(e,t){return t.startsWith(e)?t:e+t}function i(e){return/\/index.html$/g.test(e)?e.substring(0,e.length-11):e}function o(e){return/\/$/g.test(e)&&(e=e.substring(0,e.length-1)),e}var s=System.global,a=s.define;s.define=void 0;var c=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},u=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},l=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},p=require("angular2/src/router/location_strategy"),f=require("angular2/src/core/facade/lang"),d=require("angular2/src/core/facade/async"),h=require("angular2/src/core/facade/lang"),g=require("angular2/src/core/facade/exceptions"),v=require("angular2/angular2");e.APP_BASE_HREF=f.CONST_EXPR(new v.OpaqueToken("appBaseHref"));var m=function(){function t(e,t){var r=this;this.platformStrategy=e,this._subject=new d.EventEmitter;var n=f.isPresent(t)?t:this.platformStrategy.getBaseHref();if(h.isBlank(n))throw new g.BaseException("No base href set. Either provide a provider for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o(i(n)),this.platformStrategy.onPopState(function(e){d.ObservableWrapper.callNext(r._subject,{url:r.path(),pop:!0})})}return t.prototype.path=function(){return this.normalize(this.platformStrategy.path())},t.prototype.normalize=function(e){return o(r(this._baseHref,i(e)))},t.prototype.prepareExternalUrl=function(e){return e.startsWith("/")||(e="/"+e),this.platformStrategy.prepareExternalUrl(o(n(this._baseHref,e)))},t.prototype.go=function(e,t){void 0===t&&(t=""),this.platformStrategy.pushState(null,"",e,t)},t.prototype.forward=function(){this.platformStrategy.forward()},t.prototype.back=function(){this.platformStrategy.back()},t.prototype.subscribe=function(e,t,r){return void 0===t&&(t=null),void 0===r&&(r=null),d.ObservableWrapper.subscribe(this._subject,e,t,r)},t=c([v.Injectable(),l(1,v.Optional()),l(1,v.Inject(e.APP_BASE_HREF)),u("design:paramtypes",[p.LocationStrategy,String])],t)}();return e.Location=m,s.define=a,t.exports}),System.register("angular2/src/router/path_recognizer",["angular2/src/core/facade/lang","angular2/src/core/facade/exceptions","angular2/src/core/facade/collection","angular2/src/router/url_parser","angular2/src/router/instruction"],!0,function(require,e,t){function r(e){return u.isBlank(e)?null:e.toString()}function n(e){u.StringWrapper.startsWith(e,"/")&&(e=u.StringWrapper.substring(e,1));var t=o(e),r=[],n=0;if(t.length>98)throw new l.BaseException("'"+e+"' has more than the maximum supported number of segments.");for(var i=t.length-1,s=0;i>=s;s++){var a,c=t[s];if(u.isPresent(a=u.RegExpWrapper.firstMatch(_,c)))r.push(new m(a[1])),n+=100-s;else if(u.isPresent(a=u.RegExpWrapper.firstMatch(b,c)))r.push(new y(a[1]));else if("..."==c){if(i>s)throw new l.BaseException('Unexpected "..." before the end of the path for "'+e+'".');r.push(new g)}else r.push(new v(c)),n+=100*(100-s)}var f=p.StringMapWrapper.create();return p.StringMapWrapper.set(f,"segments",r),p.StringMapWrapper.set(f,"specificity",n),f}function i(e){return e.map(function(e){return e instanceof y?"*":e instanceof g?"...":e instanceof m?":":e instanceof v?e.path:void 0}).join("/")}function o(e){return e.split("/")}function s(e){if(u.StringWrapper.contains(e,"#"))throw new l.BaseException('Path "'+e+'" should not include "#". Use "HashLocationStrategy" instead.');var t=u.RegExpWrapper.firstMatch(x,e);if(u.isPresent(t))throw new l.BaseException('Path "'+e+'" contains "'+t[0]+'" which is not allowed in a route config.')}var a=System.global,c=a.define;a.define=void 0;var u=require("angular2/src/core/facade/lang"),l=require("angular2/src/core/facade/exceptions"),p=require("angular2/src/core/facade/collection"),f=require("angular2/src/router/url_parser"),d=require("angular2/src/router/instruction"),h=function(){function e(e){var t=this;this.map={},this.keys={},u.isPresent(e)&&p.StringMapWrapper.forEach(e,function(e,r){t.map[r]=u.isPresent(e)?e.toString():null,t.keys[r]=!0})}return e.prototype.get=function(e){return p.StringMapWrapper["delete"](this.keys,e),this.map[e]},e.prototype.getUnused=function(){var e=this,t=p.StringMapWrapper.create(),r=p.StringMapWrapper.keys(this.keys);return r.forEach(function(r){return t[r]=p.StringMapWrapper.get(e.map,r)}),t},e}(),g=function(){function e(){this.name=""}return e.prototype.generate=function(e){return""},e.prototype.match=function(e){return!0},e}(),v=function(){function e(e){this.path=e,this.name=""}return e.prototype.match=function(e){return e==this.path},e.prototype.generate=function(e){return this.path},e}(),m=function(){function e(e){this.name=e}return e.prototype.match=function(e){return e.length>0},e.prototype.generate=function(e){if(!p.StringMapWrapper.contains(e.map,this.name))throw new l.BaseException("Route generator for '"+this.name+"' was not included in parameters passed.");return r(e.get(this.name))},e}(),y=function(){function e(e){this.name=e}return e.prototype.match=function(e){return!0},e.prototype.generate=function(e){return r(e.get(this.name))},e}(),_=/^:([^\/]+)$/g,b=/^\*([^\/]+)$/g,x=u.RegExpWrapper.create("//|\\(|\\)|;|\\?|="),w=function(){function e(e,t,r){this.instruction=e,this.remaining=t,this.remainingAux=r}return e}();e.PathMatch=w;var j=function(){function e(e,t){this.path=e,this.handler=t,this.terminal=!0,this._cache=new p.Map,s(e);var r=n(e);this._segments=r.segments,this.specificity=r.specificity,this.hash=i(this._segments);var o=this._segments[this._segments.length-1];this.terminal=!(o instanceof g)}return e.prototype.recognize=function(e){for(var t,r=e,n={},i=[],o=0;o<this._segments.length;o+=1){var s=this._segments[o];if(t=r,s instanceof g)break;if(u.isPresent(t)){if(i.push(t.path),s instanceof y){n[s.name]=t.toString(),r=null;break}if(s instanceof m)n[s.name]=t.path;else if(!s.match(t.path))return null;r=t.child}else if(!s.match(""))return null}if(this.terminal&&u.isPresent(r))return null;var a,c,l,d,h=i.join("/");if(u.isPresent(t)){var v=e instanceof f.RootUrl?e:t;d=u.isPresent(v.params)?p.StringMapWrapper.merge(v.params,n):n,l=f.serializeParams(v.params),a=t.auxiliary}else d=n,a=[],l=[];return c=this._getInstruction(h,l,this,d),new w(c,r,a)},e.prototype.generate=function(e){for(var t=new h(e),r=[],n=0;n<this._segments.length;n++){var i=this._segments[n];i instanceof g||r.push(i.generate(t))}var o=r.join("/"),s=t.getUnused(),a=f.serializeParams(s);return this._getInstruction(o,a,this,e)},e.prototype._getInstruction=function(e,t,r,n){var i=e+"?"+t.join("?");if(this._cache.has(i))return this._cache.get(i);var o=new d.ComponentInstruction_(e,t,r,n);return this._cache.set(i,o),o},e}();return e.PathRecognizer=j,a.define=c,t.exports}),System.register("angular2/src/router/route_config_nomalizer",["angular2/src/router/route_config_decorator","angular2/src/core/facade/lang","angular2/src/core/facade/exceptions"],!0,function(require,e,t){function r(e){if(e instanceof s.Route||e instanceof s.Redirect||e instanceof s.AsyncRoute||e instanceof s.AuxRoute)return e;if(+!!e.component+ +!!e.redirectTo+ +!!e.loader!=1)throw new c.BaseException('Route config should contain exactly one "component", "loader", or "redirectTo" property.');if(e.loader)return new s.AsyncRoute({path:e.path,loader:e.loader,as:e.as});if(e.component){if("object"==typeof e.component){var t=e.component;if("constructor"==t.type)return new s.Route({path:e.path,component:t.constructor,as:e.as});if("loader"==t.type)return new s.AsyncRoute({path:e.path,loader:t.loader,as:e.as});throw new c.BaseException('Invalid component type "'+t.type+'". Valid types are "constructor" and "loader".')}return new s.Route(e)}return e.redirectTo?new s.Redirect({path:e.path,redirectTo:e.redirectTo}):e}function n(e,t){if(!a.isType(e))throw new c.BaseException('Component for route "'+t+'" is not defined, or is not a class.')}var i=System.global,o=i.define;i.define=void 0;var s=require("angular2/src/router/route_config_decorator"),a=require("angular2/src/core/facade/lang"),c=require("angular2/src/core/facade/exceptions");return e.normalizeRouteConfig=r,e.assertComponentExists=n,i.define=o,t.exports}),System.register("angular2/src/router/route_lifecycle_reflector",["angular2/src/core/facade/lang","angular2/src/router/lifecycle_annotations_impl","angular2/src/core/reflection/reflection"],!0,function(require,e,t){function r(e,t){return t instanceof s.Type?e.name in t.prototype:!1}function n(e){for(var t=c.reflector.annotations(e),r=0;r<t.length;r+=1){var n=t[r];if(n instanceof a.CanActivate)return n.fn}return null}var i=System.global,o=i.define;i.define=void 0;var s=require("angular2/src/core/facade/lang"),a=require("angular2/src/router/lifecycle_annotations_impl"),c=require("angular2/src/core/reflection/reflection");return e.hasLifecycleHook=r,e.getCanActivateHook=n,i.define=o,t.exports}),System.register("angular2/src/router/router_link",["angular2/src/core/metadata","angular2/src/router/router","angular2/src/router/location","angular2/src/router/instruction"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=require("angular2/src/core/metadata"),a=require("angular2/src/router/router"),c=require("angular2/src/router/location"),u=require("angular2/src/router/instruction"),l=function(){function e(e,t){this._router=e,this._location=t}return Object.defineProperty(e.prototype,"isRouteActive",{get:function(){return this._router.isRouteActive(this._navigationInstruction)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"routeParams",{set:function(e){this._routeParams=e,this._navigationInstruction=this._router.generate(this._routeParams);var t=u.stringifyInstruction(this._navigationInstruction);this.visibleHref=this._location.prepareExternalUrl(t)},enumerable:!0,configurable:!0}),e.prototype.onClick=function(){return this._router.navigateByInstruction(this._navigationInstruction),!1},e=i([s.Directive({selector:"[router-link]",inputs:["routeParams: routerLink"],host:{"(click)":"onClick()","[attr.href]":"visibleHref","[class.router-link-active]":"isRouteActive"}}),o("design:paramtypes",[a.Router,c.Location])],e)}();return e.RouterLink=l,r.define=n,t.exports}),System.register("angular2/src/router/route_recognizer",["angular2/src/core/facade/lang","angular2/src/core/facade/exceptions","angular2/src/core/facade/collection","angular2/src/router/path_recognizer","angular2/src/router/route_config_impl","angular2/src/router/async_route_handler","angular2/src/router/sync_route_handler","angular2/src/router/url_parser"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/core/facade/lang"),o=require("angular2/src/core/facade/exceptions"),s=require("angular2/src/core/facade/collection"),a=require("angular2/src/router/path_recognizer"),c=require("angular2/src/router/route_config_impl"),u=require("angular2/src/router/async_route_handler"),l=require("angular2/src/router/sync_route_handler"),p=require("angular2/src/router/url_parser"),f=function(){function e(){this.names=new s.Map,this.auxRoutes=new s.Map,this.matchers=[],this.redirects=[]}return e.prototype.config=function(e){var t;if(i.isPresent(e.as)&&e.as[0].toUpperCase()!=e.as[0]){var r=e.as[0].toUpperCase()+e.as.substring(1);throw new o.BaseException("Route '"+e.path+"' with alias '"+e.as+"' does not begin with an uppercase letter. Route aliases should be CamelCase like '"+r+"'.")}if(e instanceof c.AuxRoute){t=new l.SyncRouteHandler(e.component,e.data);var n=i.StringWrapper.startsWith(e.path,"/")?e.path.substring(1):e.path,s=new a.PathRecognizer(e.path,t);return this.auxRoutes.set(n,s),s.terminal}if(e instanceof c.Redirect)return this.redirects.push(new d(e.path,e.redirectTo)),!0;e instanceof c.Route?t=new l.SyncRouteHandler(e.component,e.data):e instanceof c.AsyncRoute&&(t=new u.AsyncRouteHandler(e.loader,e.data));var s=new a.PathRecognizer(e.path,t);return this.matchers.forEach(function(t){if(s.hash==t.hash)throw new o.BaseException("Configuration '"+e.path+"' conflicts with existing route '"+t.path+"'")}),this.matchers.push(s),i.isPresent(e.as)&&this.names.set(e.as,s),s.terminal},e.prototype.recognize=function(e){var t=[];return e=this._redirect(e),this.matchers.forEach(function(r){var n=r.recognize(e);i.isPresent(n)&&t.push(n)}),t},e.prototype._redirect=function(e){for(var t=0;t<this.redirects.length;t+=1){var r=this.redirects[t],n=r.redirect(e);if(i.isPresent(n))return n}return e},e.prototype.recognizeAuxiliary=function(e){var t=this.auxRoutes.get(e.path);return i.isBlank(t)?null:t.recognize(e)},e.prototype.hasRoute=function(e){return this.names.has(e)},e.prototype.generate=function(e,t){var r=this.names.get(e);return i.isBlank(r)?null:r.generate(t)},e}();e.RouteRecognizer=f;var d=function(){function e(e,t){this.segments=[],this.toSegments=[],i.StringWrapper.startsWith(e,"/")&&(e=e.substring(1)),this.segments=e.split("/"),i.StringWrapper.startsWith(t,"/")&&(t=t.substring(1)),this.toSegments=t.split("/")}return e.prototype.redirect=function(e){for(var t=0;t<this.segments.length;t+=1){if(i.isBlank(e))return null;var r=this.segments[t];if(r!=e.path)return null;e=e.child}for(var t=this.toSegments.length-1;t>=0;t-=1){var r=this.toSegments[t];e=new p.Url(r,e)}return e},e}();return e.Redirector=d,r.define=n,t.exports}),System.register("angular2/src/router/route_registry",["angular2/src/router/route_recognizer","angular2/src/router/instruction","angular2/src/core/facade/collection","angular2/src/core/facade/async","angular2/src/core/facade/lang","angular2/src/core/facade/exceptions","angular2/src/router/route_config_impl","angular2/src/core/reflection/reflection","angular2/angular2","angular2/src/router/route_config_nomalizer","angular2/src/router/url_parser"],!0,function(require,e,t){
function r(e){return l.ListWrapper.maximum(e,function(e){return e.component.specificity})}function n(e,t){if(f.isType(e)){var r=g.reflector.annotations(e);if(f.isPresent(r))for(var n=0;n<r.length;n++){var i=r[n];if(i instanceof h.RouteConfig)throw new d.BaseException('Child routes are not allowed for "'+t+'". Use "..." on the parent\'s route path.')}}}var i=System.global,o=i.define;i.define=void 0;var s=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},a=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},c=require("angular2/src/router/route_recognizer"),u=require("angular2/src/router/instruction"),l=require("angular2/src/core/facade/collection"),p=require("angular2/src/core/facade/async"),f=require("angular2/src/core/facade/lang"),d=require("angular2/src/core/facade/exceptions"),h=require("angular2/src/router/route_config_impl"),g=require("angular2/src/core/reflection/reflection"),v=require("angular2/angular2"),m=require("angular2/src/router/route_config_nomalizer"),y=require("angular2/src/router/url_parser"),_=p.PromiseWrapper.resolve(null),b=function(){function e(){this._rules=new l.Map}return e.prototype.config=function(e,t){t=m.normalizeRouteConfig(t),t instanceof h.Route?m.assertComponentExists(t.component,t.path):t instanceof h.AuxRoute&&m.assertComponentExists(t.component,t.path);var r=this._rules.get(e);f.isBlank(r)&&(r=new c.RouteRecognizer,this._rules.set(e,r));var i=r.config(t);t instanceof h.Route&&(i?n(t.component,t.path):this.configFromComponent(t.component))},e.prototype.configFromComponent=function(e){var t=this;if(f.isType(e)&&!this._rules.has(e)){var r=g.reflector.annotations(e);if(f.isPresent(r))for(var n=0;n<r.length;n++){var i=r[n];if(i instanceof h.RouteConfig){var o=i.configs;o.forEach(function(r){return t.config(e,r)})}}}},e.prototype.recognize=function(e,t){var r=y.parser.parse(e);return this._recognize(r,t)},e.prototype._recognize=function(e,t){var r=this;return this._recognizePrimaryRoute(e,t).then(function(e){return r._completeAuxiliaryRouteMatches(e,t)})},e.prototype._recognizePrimaryRoute=function(e,t){var n=this,i=this._rules.get(t);if(f.isBlank(i))return _;var o=i.recognize(e),s=o.map(function(e){return n._completePrimaryRouteMatch(e)});return p.PromiseWrapper.all(s).then(r)},e.prototype._completePrimaryRouteMatch=function(e){var t=this,r=e.instruction;return r.resolveComponentType().then(function(n){return t.configFromComponent(n),r.terminal?new u.PrimaryInstruction(r,null,e.remainingAux):t._recognizePrimaryRoute(e.remaining,n).then(function(t){return f.isBlank(t)?null:new u.PrimaryInstruction(r,t,e.remainingAux)})})},e.prototype._completeAuxiliaryRouteMatches=function(e,t){var r=this;if(f.isBlank(e))return _;var n=this._rules.get(t),i={},o=e.auxUrls.map(function(e){var o=n.recognizeAuxiliary(e);return f.isBlank(o)?_:r._completePrimaryRouteMatch(o).then(function(n){return f.isPresent(n)?r._completeAuxiliaryRouteMatches(n,t).then(function(t){i[e.path]=t}):void 0})});return p.PromiseWrapper.all(o).then(function(t){return f.isBlank(e.child)?new u.Instruction(e.component,null,i):r._completeAuxiliaryRouteMatches(e.child,e.component.componentType).then(function(t){return new u.Instruction(e.component,t,i)})})},e.prototype.generate=function(e,t){for(var r=[],n=t,i=!1,o=0;o<e.length;o+=1){var s=e[o];if(f.isBlank(n))throw new d.BaseException('Could not find route named "'+s+'".');if(!f.isString(s))throw new d.BaseException('Unexpected segment "'+s+'" in link DSL. Expected a string.');if(""==s||"."==s||".."==s)throw new d.BaseException('"'+s+'/" is only allowed at the beginning of a link DSL.');var a={};if(o+1<e.length){var c=e[o+1];f.isStringMap(c)&&(a=c,o+=1)}var p=this._rules.get(n);if(f.isBlank(p))throw new d.BaseException('Component "'+f.getTypeNameForDebugging(n)+'" has no route config.');var h=p.generate(s,a);if(f.isBlank(h))throw new d.BaseException('Component "'+f.getTypeNameForDebugging(n)+'" has no route named "'+s+'".');r.push(h),n=h.componentType,i=h.terminal}var g=null;if(!i){if(g=this._generateRedirects(n),f.isPresent(g)){for(var v=g;f.isPresent(v.child);)v=v.child;i=v.component.terminal}if(f.isPresent(n)&&!i)throw new d.BaseException('Link "'+l.ListWrapper.toJSON(e)+'" does not resolve to a terminal or async instruction.')}for(;r.length>0;)g=new u.Instruction(r.pop(),g,{});return g},e.prototype.hasRoute=function(e,t){var r=this._rules.get(t);return f.isBlank(r)?!1:r.hasRoute(e)},e.prototype._generateRedirects=function(e){if(f.isBlank(e))return null;var t=this._rules.get(e);if(f.isBlank(t))return null;for(var r=0;r<t.redirects.length;r+=1){var n=t.redirects[r];if(1==n.segments.length&&""==n.segments[0]){var i=y.pathSegmentsToUrl(n.toSegments),o=t.recognize(i),s=l.ListWrapper.maximum(o,function(e){return e.instruction.specificity});if(f.isPresent(s)){var a=this._generateRedirects(s.instruction.componentType);return new u.Instruction(s.instruction,a,{})}return null}}return null},e=s([v.Injectable(),a("design:paramtypes",[])],e)}();return e.RouteRegistry=b,i.define=o,t.exports}),System.register("angular2/src/router/router",["angular2/src/core/facade/async","angular2/src/core/facade/collection","angular2/src/core/facade/lang","angular2/src/core/facade/exceptions","angular2/src/router/instruction","angular2/src/router/route_lifecycle_reflector"],!0,function(require,e,t){function r(e){return c.ListWrapper.reduce(e,function(e,t){return u.isString(t)?e.concat(u.StringWrapper.split(t,y)):(e.push(t),e)},[])}function n(e,t){var r=d;return u.isPresent(e.child)&&(r=n(e.child,u.isPresent(t)?t.child:null)),r.then(function(r){if(0==r)return!1;if(e.component.reuse)return!0;var n=f.getCanActivateHook(e.component.componentType);return u.isPresent(n)?n(e.component,u.isPresent(t)?t.component:null):!0})}var i=System.global,o=i.define;i.define=void 0;var s=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("angular2/src/core/facade/async"),c=require("angular2/src/core/facade/collection"),u=require("angular2/src/core/facade/lang"),l=require("angular2/src/core/facade/exceptions"),p=require("angular2/src/router/instruction"),f=require("angular2/src/router/route_lifecycle_reflector"),d=a.PromiseWrapper.resolve(!0),h=a.PromiseWrapper.resolve(!1),g=function(){function e(e,t,r){this.registry=e,this.parent=t,this.hostComponent=r,this.navigating=!1,this._currentInstruction=null,this._currentNavigation=d,this._outlet=null,this._auxRouters=new c.Map,this._subject=new a.EventEmitter}return e.prototype.childRouter=function(e){return this._childRouter=new m(this,e)},e.prototype.auxRouter=function(e){return new m(this,e)},e.prototype.registerPrimaryOutlet=function(e){if(u.isPresent(e.name))throw new l.BaseException("registerPrimaryOutlet expects to be called with an unnamed outlet.");return this._outlet=e,u.isPresent(this._currentInstruction)?this.commit(this._currentInstruction,!1):d},e.prototype.registerAuxOutlet=function(e){var t=e.name;if(u.isBlank(t))throw new l.BaseException("registerAuxOutlet expects to be called with an outlet with a name.");var r=this.auxRouter(this.hostComponent);this._auxRouters.set(t,r),r._outlet=e;var n;return u.isPresent(this._currentInstruction)&&u.isPresent(n=this._currentInstruction.auxInstruction[t])?r.commit(n):d},e.prototype.isRouteActive=function(e){for(var t=this;u.isPresent(t.parent)&&u.isPresent(e.child);)t=t.parent,e=e.child;return u.isPresent(this._currentInstruction)&&this._currentInstruction.component==e.component},e.prototype.config=function(e){var t=this;return e.forEach(function(e){t.registry.config(t.hostComponent,e)}),this.renavigate()},e.prototype.navigate=function(e){var t=this.generate(e);return this.navigateByInstruction(t,!1)},e.prototype.navigateByUrl=function(e,t){var r=this;return void 0===t&&(t=!1),this._currentNavigation=this._currentNavigation.then(function(n){return r.lastNavigationAttempt=e,r._startNavigating(),r._afterPromiseFinishNavigating(r.recognize(e).then(function(e){return u.isBlank(e)?!1:r._navigate(e,t)}))})},e.prototype.navigateByInstruction=function(e,t){var r=this;return void 0===t&&(t=!1),u.isBlank(e)?h:this._currentNavigation=this._currentNavigation.then(function(n){return r._startNavigating(),r._afterPromiseFinishNavigating(r._navigate(e,t))})},e.prototype._navigate=function(e,t){var r=this;return this._settleInstruction(e).then(function(t){return r._canReuse(e)}).then(function(t){return r._canActivate(e)}).then(function(n){return n?r._canDeactivate(e).then(function(n){return n?r.commit(e,t).then(function(t){return r._emitNavigationFinish(p.stringifyInstruction(e)),!0}):void 0}):!1})},e.prototype._settleInstruction=function(e){var t=this,r=[];return u.isBlank(e.component.componentType)&&r.push(e.component.resolveComponentType().then(function(e){t.registry.configFromComponent(e)})),u.isPresent(e.child)&&r.push(this._settleInstruction(e.child)),c.StringMapWrapper.forEach(e.auxInstruction,function(e,n){r.push(t._settleInstruction(e))}),a.PromiseWrapper.all(r)},e.prototype._emitNavigationFinish=function(e){a.ObservableWrapper.callNext(this._subject,e)},e.prototype._afterPromiseFinishNavigating=function(e){var t=this;return a.PromiseWrapper.catchError(e.then(function(e){return t._finishNavigating()}),function(e){throw t._finishNavigating(),e})},e.prototype._canReuse=function(e){var t=this;return u.isBlank(this._outlet)?h:this._outlet.canReuse(e.component).then(function(r){return e.component.reuse=r,r&&u.isPresent(t._childRouter)&&u.isPresent(e.child)?t._childRouter._canReuse(e.child):void 0})},e.prototype._canActivate=function(e){return n(e,this._currentInstruction)},e.prototype._canDeactivate=function(e){var t=this;if(u.isBlank(this._outlet))return d;var r,n=null,i=!1,o=null;return u.isPresent(e)&&(n=e.child,o=e.component,i=e.component.reuse),r=i?d:this._outlet.canDeactivate(o),r.then(function(e){return 0==e?!1:u.isPresent(t._childRouter)?t._childRouter._canDeactivate(n):!0})},e.prototype.commit=function(e,t){var r=this;void 0===t&&(t=!1),this._currentInstruction=e;var n=d;if(u.isPresent(this._outlet)){var i=e.component;n=i.reuse?this._outlet.reuse(i):this.deactivate(e).then(function(e){return r._outlet.activate(i)}),u.isPresent(e.child)&&(n=n.then(function(t){return u.isPresent(r._childRouter)?r._childRouter.commit(e.child):void 0}))}var o=[];return this._auxRouters.forEach(function(t,r){o.push(t.commit(e.auxInstruction[r]))}),n.then(function(e){return a.PromiseWrapper.all(o)})},e.prototype._startNavigating=function(){this.navigating=!0},e.prototype._finishNavigating=function(){this.navigating=!1},e.prototype.subscribe=function(e){return a.ObservableWrapper.subscribe(this._subject,e)},e.prototype.deactivate=function(e){var t=this,r=null,n=null;u.isPresent(e)&&(r=e.child,n=e.component);var i=d;return u.isPresent(this._childRouter)&&(i=this._childRouter.deactivate(r)),u.isPresent(this._outlet)&&(i=i.then(function(e){return t._outlet.deactivate(n)})),i},e.prototype.recognize=function(e){return this.registry.recognize(e,this.hostComponent)},e.prototype.renavigate=function(){return u.isBlank(this.lastNavigationAttempt)?this._currentNavigation:this.navigateByUrl(this.lastNavigationAttempt)},e.prototype.generate=function(e){var t=r(e),n=c.ListWrapper.first(t),i=c.ListWrapper.slice(t,1),o=this;if(""==n)for(;u.isPresent(o.parent);)o=o.parent;else if(".."==n){for(o=o.parent;".."==c.ListWrapper.first(i);)if(i=c.ListWrapper.slice(i,1),o=o.parent,u.isBlank(o))throw new l.BaseException('Link "'+c.ListWrapper.toJSON(e)+'" has too many "../" segments.')}else if("."!=n){var s=this.registry.hasRoute(n,this.hostComponent),a=u.isPresent(this.parent)&&this.registry.hasRoute(n,this.parent.hostComponent);if(a&&s){var p='Link "'+c.ListWrapper.toJSON(e)+'" is ambiguous, use "./" or "../" to disambiguate.';throw new l.BaseException(p)}a&&(o=this.parent),i=e}if(""==i[i.length-1]&&i.pop(),i.length<1){var p='Link "'+c.ListWrapper.toJSON(e)+'" must include a route name.';throw new l.BaseException(p)}for(var f=this.registry.generate(i,o.hostComponent),d=[],h=o.parent;u.isPresent(h);)d.unshift(h._currentInstruction),h=h.parent;for(;d.length>0;)f=d.pop().replaceChild(f);return f},e}();e.Router=g;var v=function(e){function t(t,r,n){var i=this;e.call(this,t,null,n),this._location=r,this._locationSub=this._location.subscribe(function(e){return i.navigateByUrl(e.url,u.isPresent(e.pop))}),this.registry.configFromComponent(n),this.navigateByUrl(r.path())}return s(t,e),t.prototype.commit=function(t,r){var n=this;void 0===r&&(r=!1);var i=p.stringifyInstructionPath(t),o=p.stringifyInstructionQuery(t);i.length>0&&(i="/"+i);var s=e.prototype.commit.call(this,t);return r||(s=s.then(function(e){n._location.go(i,o)})),s},t.prototype.dispose=function(){u.isPresent(this._locationSub)&&(a.ObservableWrapper.dispose(this._locationSub),this._locationSub=null)},t}(g);e.RootRouter=v;var m=function(e){function t(t,r){e.call(this,t.registry,t,r),this.parent=t}return s(t,e),t.prototype.navigateByUrl=function(e,t){return void 0===t&&(t=!1),this.parent.navigateByUrl(e,t)},t.prototype.navigateByInstruction=function(e,t){return void 0===t&&(t=!1),this.parent.navigateByInstruction(e,t)},t}(g),y=new RegExp("/");return i.define=o,t.exports}),System.register("angular2/src/router/router_outlet",["angular2/src/core/facade/async","angular2/src/core/facade/collection","angular2/src/core/facade/lang","angular2/src/core/facade/exceptions","angular2/angular2","angular2/src/router/router","angular2/src/router/instruction","angular2/src/router/lifecycle_annotations","angular2/src/router/route_lifecycle_reflector"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},a=require("angular2/src/core/facade/async"),c=require("angular2/src/core/facade/collection"),u=require("angular2/src/core/facade/lang"),l=require("angular2/src/core/facade/exceptions"),p=require("angular2/angular2"),f=require("angular2/src/router/router"),d=require("angular2/src/router/instruction"),h=require("angular2/src/router/lifecycle_annotations"),g=require("angular2/src/router/route_lifecycle_reflector"),v=a.PromiseWrapper.resolve(!0),m=function(){function e(e,t,r,n){this._elementRef=e,this._loader=t,this._parentRouter=r,this.name=null,this._componentRef=null,this._currentInstruction=null,u.isPresent(n)?(this.name=n,this._parentRouter.registerAuxOutlet(this)):this._parentRouter.registerPrimaryOutlet(this)}return e.prototype.activate=function(e){var t=this,r=this._currentInstruction;this._currentInstruction=e;var n=e.componentType,i=this._parentRouter.childRouter(n),o=p.Injector.resolve([p.provide(d.RouteData,{useValue:e.routeData}),p.provide(d.RouteParams,{useValue:new d.RouteParams(e.params)}),p.provide(f.Router,{useValue:i})]);return this._loader.loadNextToLocation(n,this._elementRef,o).then(function(i){return t._componentRef=i,g.hasLifecycleHook(h.onActivate,n)?t._componentRef.instance.onActivate(e,r):void 0})},e.prototype.reuse=function(e){var t=this._currentInstruction;if(this._currentInstruction=e,u.isBlank(this._componentRef))throw new l.BaseException("Cannot reuse an outlet that does not contain a component.");return a.PromiseWrapper.resolve(g.hasLifecycleHook(h.onReuse,this._currentInstruction.componentType)?this._componentRef.instance.onReuse(e,t):!0)},e.prototype.deactivate=function(e){var t=this,r=v;return u.isPresent(this._componentRef)&&u.isPresent(this._currentInstruction)&&g.hasLifecycleHook(h.onDeactivate,this._currentInstruction.componentType)&&(r=a.PromiseWrapper.resolve(this._componentRef.instance.onDeactivate(e,this._currentInstruction))),r.then(function(e){u.isPresent(t._componentRef)&&(t._componentRef.dispose(),t._componentRef=null)})},e.prototype.canDeactivate=function(e){return u.isBlank(this._currentInstruction)?v:g.hasLifecycleHook(h.canDeactivate,this._currentInstruction.componentType)?a.PromiseWrapper.resolve(this._componentRef.instance.canDeactivate(e,this._currentInstruction)):v},e.prototype.canReuse=function(e){var t;return t=u.isBlank(this._currentInstruction)||this._currentInstruction.componentType!=e.componentType?!1:g.hasLifecycleHook(h.canReuse,this._currentInstruction.componentType)?this._componentRef.instance.canReuse(e,this._currentInstruction):e==this._currentInstruction||u.isPresent(e.params)&&u.isPresent(this._currentInstruction.params)&&c.StringMapWrapper.equals(e.params,this._currentInstruction.params),a.PromiseWrapper.resolve(t)},e=i([p.Directive({selector:"router-outlet"}),s(3,p.Attribute("name")),o("design:paramtypes",[p.ElementRef,p.DynamicComponentLoader,f.Router,String])],e)}();return e.RouterOutlet=m,r.define=n,t.exports}),System.register("angular2/router",["angular2/src/router/router","angular2/src/router/router_outlet","angular2/src/router/router_link","angular2/src/router/instruction","angular2/src/router/route_registry","angular2/src/router/location_strategy","angular2/src/router/hash_location_strategy","angular2/src/router/path_location_strategy","angular2/src/router/location","angular2/src/router/route_config_decorator","angular2/src/router/route_definition","angular2/src/router/lifecycle_annotations","angular2/src/router/instruction","angular2/angular2","angular2/src/router/location_strategy","angular2/src/router/path_location_strategy","angular2/src/router/router","angular2/src/router/router_outlet","angular2/src/router/router_link","angular2/src/router/route_registry","angular2/src/router/location","angular2/angular2","angular2/src/core/facade/lang","angular2/src/core/facade/exceptions"],!0,function(require,e,t){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function n(e,t,r,n){var i=new x.RootRouter(e,t,r);return n.registerDisposeListener(function(){return i.dispose()}),i}function i(e){if(0==e.componentTypes.length)throw new E.BaseException("Bootstrap at least one component before injecting Router.");return e.componentTypes[0]}var o=System.global,s=o.define;o.define=void 0;var a=require("angular2/src/router/router");e.Router=a.Router;var c=require("angular2/src/router/router_outlet");e.RouterOutlet=c.RouterOutlet;var u=require("angular2/src/router/router_link");e.RouterLink=u.RouterLink;var l=require("angular2/src/router/instruction");e.RouteParams=l.RouteParams,e.RouteData=l.RouteData;var p=require("angular2/src/router/route_registry");e.RouteRegistry=p.RouteRegistry;var f=require("angular2/src/router/location_strategy");e.LocationStrategy=f.LocationStrategy;var d=require("angular2/src/router/hash_location_strategy");e.HashLocationStrategy=d.HashLocationStrategy;var h=require("angular2/src/router/path_location_strategy");e.PathLocationStrategy=h.PathLocationStrategy;var g=require("angular2/src/router/location");e.Location=g.Location,e.APP_BASE_HREF=g.APP_BASE_HREF,r(require("angular2/src/router/route_config_decorator")),r(require("angular2/src/router/route_definition"));var v=require("angular2/src/router/lifecycle_annotations");e.CanActivate=v.CanActivate;var m=require("angular2/src/router/instruction");e.Instruction=m.Instruction,e.ComponentInstruction=m.ComponentInstruction;var y=require("angular2/angular2");e.OpaqueToken=y.OpaqueToken;var _=require("angular2/src/router/location_strategy"),b=require("angular2/src/router/path_location_strategy"),x=require("angular2/src/router/router"),w=require("angular2/src/router/router_outlet"),j=require("angular2/src/router/router_link"),S=require("angular2/src/router/route_registry"),C=require("angular2/src/router/location"),R=require("angular2/angular2"),P=require("angular2/src/core/facade/lang"),E=require("angular2/src/core/facade/exceptions");return e.ROUTER_PRIMARY_COMPONENT=P.CONST_EXPR(new R.OpaqueToken("RouterPrimaryComponent")),e.ROUTER_DIRECTIVES=P.CONST_EXPR([w.RouterOutlet,j.RouterLink]),e.ROUTER_PROVIDERS=P.CONST_EXPR([S.RouteRegistry,P.CONST_EXPR(new R.Provider(_.LocationStrategy,{useClass:b.PathLocationStrategy})),C.Location,P.CONST_EXPR(new R.Provider(x.Router,{useFactory:n,deps:P.CONST_EXPR([S.RouteRegistry,C.Location,e.ROUTER_PRIMARY_COMPONENT,R.ApplicationRef])})),P.CONST_EXPR(new R.Provider(e.ROUTER_PRIMARY_COMPONENT,{useFactory:i,deps:P.CONST_EXPR([R.ApplicationRef])}))]),e.ROUTER_BINDINGS=e.ROUTER_PROVIDERS,o.define=s,t.exports});
//# sourceMappingURL=router.dev.min.js.map